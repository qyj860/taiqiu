<view class="page-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-title">ğŸ± å°çƒå¤§å¸ˆ</view>

  <!-- ç©æ³•é€‰æ‹© -->
  <view class="game-mode">
    <picker mode="selector" range="{{gameModes}}" value="{{currentMode}}" bindchange="changeMode">
      <view class="mode-selector">
        {{gameModes[currentMode]}}
        <text class="arrow">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- ç©å®¶ä¿¡æ¯ -->
  <view class="players-container">
    <view 
      class="player-card {{activePlayer == index ? 'active' : ''}}" 
      wx:for="{{players}}" 
      wx:key="index"
    >
      <view class="player-header">
        <text class="player-name">{{item.name}}</text>
        <view class="turn-indicator {{activePlayer == index ? 'active' : ''}}"></view>
      </view>
      <text class="score-display {{currentMode < 2 && index == 1 ? 'negative' : ''}}">
        {{currentMode < 2 ? (index == 0 ? item.score : -players[0].score) : item.score}}
      </text>
    </view>
  </view>

  <!-- è®¡åˆ†æ“ä½œåŒº -->
  <view class="scoring-container">
    <!-- ä¹çƒ/å››çƒ -->
    <view wx:if="{{currentMode < 2}}" class="button-row">
      <button 
        wx:for="{{nineBallTypes}}" 
        wx:key="type"
        data-type="{{item.type}}"
        bindtap="handleNineBall"
        style="background-color: {{item.color}}"
        class="nine-ball-btn"
      >
        <text class="btn-label">{{item.label}}</text>
        <text class="btn-points">{{item.points}}</text>
      </button>
    </view>

    <!-- æ–¯è¯ºå…‹ -->
    <view wx:elif="{{currentMode == 2}}" class="snooker-container">
      <view class="snooker-grid">
        <button 
          wx:for="{{snookerBalls}}" 
          wx:key="type"
          data-type="{{item.type}}"
          bindtap="handleSnooker"
          class="snooker-btn {{item.class}}"
        >
          {{item.label}}
          <text class="point">+{{item.points}}</text>
        </button>
      </view>

      <button 
        class="switch-player-btn"
        bindtap="switchSnookerPlayer"
      >
        åˆ‡æ¢å¯¹æ‰‹å‡»çƒ
      </button>
    </view>

    <!-- é»‘å…« -->
    <view wx:else class="button-row">
      <button 
        class="win-btn {{index == 0 ? 'player1' : 'player2'}}"
        wx:for="{{players}}"
        wx:key="index"
        bindtap="handleBlackEight"
        data-player="{{index}}"
      >
        {{item.name}}è·èƒœ
        <text class="score">{{item.score}}</text>
      </button>
    </view>
  </view>

  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="control-bar">
    <button class="reset-btn" bindtap="resetAll">é‡ç½®æ¯”èµ›</button>
  </view>
</view>